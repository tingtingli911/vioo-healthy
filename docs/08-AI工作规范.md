# AI 工作规范

> **重要提示**：本文档定义了 AI 助手在 vioo-healthy 项目中必须遵循的工作流程和规范。每次进行代码修改或功能开发前，AI 必须阅读并遵循本文档。

## 工作流程

### 第一步：操作前检查（必须执行）

在进行任何代码修改或功能开发之前，AI 必须：

1. **阅读相关文档**（根据任务类型选择）：
   - `docs/02-技术架构.md` - 了解技术栈、目录结构、架构设计
   - `docs/03-功能模块.md` - 了解已有功能，避免重复开发
   - `docs/04-API文档.md` - 了解 API 接口规范（如涉及 API 变更）
   - `docs/05-数据库设计.md` - 了解数据模型（如涉及数据库变更）
   - `docs/06-开发规范.md` - 了解代码规范、命名规范、文件组织规范

2. **检查现有代码结构**：
   - 使用 `list_dir` 或 `glob_file_search` 查看相关目录
   - 使用 `grep` 或 `codebase_search` 查找类似功能
   - 确认是否已有相关组件/模块/函数
   - **避免重复造轮子**

3. **确认变更范围**：
   - 明确需要修改的文件
   - 明确需要新增的文件
   - 明确可能影响的现有功能
   - 评估是否与现有逻辑冲突

### 第二步：执行开发任务

按照文档规范和代码规范进行开发。

### 第三步：同步更新文档（必须执行）

根据变更类型，必须更新以下文档：

#### 1. 新增功能
- ✅ 更新 `docs/03-功能模块.md` - 在"已实现功能"或"开发中功能"部分添加功能说明
- ✅ 更新 `docs/CHANGELOG.md` - 在"未发布"部分的"新增"小节添加记录

#### 2. API 变更
- ✅ 更新 `docs/04-API文档.md` - 添加或修改接口文档
- ✅ 更新 `docs/CHANGELOG.md` - 记录 API 变更

#### 3. 数据库变更
- ✅ 更新 `docs/05-数据库设计.md` - 更新数据模型说明
- ✅ 更新 `docs/CHANGELOG.md` - 记录数据库变更

#### 4. 架构/技术栈变更
- ✅ 更新 `docs/02-技术架构.md` - 更新技术栈和目录结构
- ✅ 更新 `docs/CHANGELOG.md` - 记录架构变更

#### 5. 开发规范变更
- ✅ 更新 `docs/06-开发规范.md` - 更新规范内容
- ✅ 更新 `docs/CHANGELOG.md` - 记录规范变更

#### 6. Bug 修复
- ✅ 更新 `docs/CHANGELOG.md` - 在"修复"小节添加记录

#### 7. 功能改进/重构
- ✅ 更新 `docs/CHANGELOG.md` - 在"变更"小节添加记录

## 文档更新格式规范

### CHANGELOG.md 更新格式

在"未发布"部分，按照以下格式添加记录：

```markdown
### 新增
- ✨ 功能名称
  - 详细描述功能点1
  - 详细描述功能点2

### 修复
- 🐛 修复问题描述
  - 修复的具体内容

### 变更
- 📝 变更内容描述
  - 变更的具体细节
```

### 其他文档更新规范

1. **保持文档结构一致**：不要随意改变文档的章节结构
2. **使用 Markdown 格式**：遵循标准 Markdown 语法
3. **更新最后更新时间**：在文档末尾更新"最后更新时间"
4. **详细描述**：确保描述清晰、完整，便于后续维护

## 重要原则

### 1. 先查看后开发
- ❌ **禁止**：直接开始编写代码而不查看文档
- ✅ **必须**：先阅读相关文档，了解项目结构和已有功能

### 2. 避免重复造轮子
- ❌ **禁止**：创建与现有功能重复的代码
- ✅ **必须**：检查是否已有类似功能，尽量复用现有代码

### 3. 保持文档同步
- ❌ **禁止**：只修改代码不更新文档
- ✅ **必须**：每次功能变更都同步更新相关文档

### 4. 遵循项目规范
- ❌ **禁止**：使用与项目规范不一致的代码风格
- ✅ **必须**：遵循 `docs/06-开发规范.md` 中的规范

## 检查清单

每次完成任务后，AI 应该确认：

- [ ] 已阅读相关文档
- [ ] 已检查现有代码，避免重复
- [ ] 代码符合项目规范
- [ ] 已更新相关文档（根据变更类型）
- [ ] 已更新 CHANGELOG.md
- [ ] 文档描述清晰完整

## 文档位置

所有文档位于 `docs/` 目录：

```
docs/
├── 01-项目概述.md
├── 02-技术架构.md
├── 03-功能模块.md
├── 04-API文档.md
├── 05-数据库设计.md
├── 06-开发规范.md
├── 07-部署说明.md
├── 08-AI工作规范.md  ← 本文档
├── CHANGELOG.md
└── README.md
```

## 示例工作流程

### 示例：添加新功能

1. **操作前检查**：
   ```
   - 读取 docs/03-功能模块.md 了解现有功能
   - 读取 docs/02-技术架构.md 了解目录结构
   - 使用 codebase_search 查找类似功能
   - 使用 list_dir 查看相关目录
   ```

2. **执行开发**：
   ```
   - 创建新组件/模块
   - 编写代码（遵循规范）
   - 测试功能
   ```

3. **更新文档**：
   ```
   - 更新 docs/03-功能模块.md
   - 更新 docs/CHANGELOG.md
   - 如果涉及 API，更新 docs/04-API文档.md
   ```

---

**最后更新时间**：2025-01-27

**维护者**：项目团队
